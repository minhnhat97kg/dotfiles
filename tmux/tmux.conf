# Tmux configuration for Android
# This is a manual config since programs.tmux is disabled on Android

# Terminal and color settings
set -g default-terminal "tmux-256color"
set-option -ga terminal-overrides ",xterm-256color:Tc"

# Vi mode
set -g mode-keys vi
setw -g mode-keys vi
set -sg escape-time 0

# Mouse support
set -g mouse on

# Vi-style copy mode bindings
bind-key -T copy-mode-vi v send-keys -X begin-selection

# Window and pane creation with current path
bind c new-window -c "#{pane_current_path}"
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# Catppuccin Mocha theme colors
set -g @catppuccin_flavor "mocha"
set -g @catppuccin_window_status_style "rounded"
set -g @catppuccin_window_default_text "#{b:pane_current_path}"
set -g @catppuccin_window_current_text "#{b:pane_current_path}"

# Pane borders (Catppuccin colors)
set -g pane-border-style "fg=#313244"
set -g pane-active-border-style "fg=#89b4fa,bold"
set -g window-style "fg=#585b70,bg=#181825"
set -g window-active-style "fg=#cdd6f4,bg=#1e1e2e"

# Smart pane navigation with vim awareness
is_vim="ps -o state= -o comm= -t '#{pane_tty}' | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'"
bind -n C-h run "($is_vim && tmux send-keys C-h) || tmux select-pane -L"
bind -n C-j run "($is_vim && tmux send-keys C-j) || tmux select-pane -D"
bind -n C-k run "($is_vim && tmux send-keys C-k) || tmux select-pane -U"
bind -n C-l run "($is_vim && tmux send-keys C-l) || tmux select-pane -R"

# Pane resizing with Alt+hjkl (no prefix needed)
bind -n M-h resize-pane -L 5
bind -n M-j resize-pane -D 5
bind -n M-k resize-pane -U 5
bind -n M-l resize-pane -R 5

# Window navigation with Alt+,/.
bind -n M-, previous-window
bind -n M-. next-window

# Alt+number to jump to window directly
bind -n M-1 select-window -t 1
bind -n M-2 select-window -t 2
bind -n M-3 select-window -t 3
bind -n M-4 select-window -t 4
bind -n M-5 select-window -t 5
bind -n M-6 select-window -t 6
bind -n M-7 select-window -t 7
bind -n M-8 select-window -t 8
bind -n M-9 select-window -t 9

# Reload tmux config (prefix + r)
bind r source-file ~/.config/tmux/tmux.conf \; display-message "Config reloaded!"

# Status bar configuration (Catppuccin theme)
set -g status-position bottom
set -g status-justify left
set -g status-style "bg=#1e1e2e,fg=#cdd6f4"
set -g status-left ""
set -g status-right "#[fg=#89b4fa,bg=#313244] %Y-%m-%d #[fg=#89b4fa,bg=#313244] %H:%M "
set -g status-right-length 50
set -g status-left-length 20

setw -g window-status-current-style "fg=#1e1e2e,bg=#89b4fa,bold"
setw -g window-status-current-format " #I:#W "

setw -g window-status-style "fg=#cdd6f4,bg=#313244"
setw -g window-status-format " #I:#W "

# Message style
set -g message-style "fg=#1e1e2e,bg=#89b4fa"
